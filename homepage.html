<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ian & Shan's Literary House</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/2deec37226.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap" rel="stylesheet">
</head>
<body>

<div class="main home">
    <!-- NAVBAR -->
    <div class="navbaar">
        <div class="nav-left">
            <img src="logodark.PNG" alt="Logo" class="nav-logo">
        </div>
        <div class="menu">
            <ul id="navbar-links">
                <li><a href="homepage.html">HOME</a></li>
                <li><a href="SERVICE.html">SERVICES</a></li>
                <li><a href="shop.html">SHOP</a></li>
                <li><a href="ABOUT.html">ABOUT</a></li>
                <!-- PROFILE will be dynamically added here -->
                <li><a href="CONTACT.html">CONTACT</a></li>
                <li><a href="MEMBERSHIP.html">MEMBERSHIP</a></li>
            </ul>
        </div>
        <form class="search" id="searchForm">
            <input class="srch" type="search" id="searchInput" placeholder="Search pages">
            <button class="btn" type="submit">Search</button>
        </form>
        <div class="theme-toggle-container">
            <button id="theme-toggle" class="theme-btn">
                <i id="theme-icon" class="fa-solid fa-moon"></i>
            </button>  
        </div>
    </div>

    <!-- HERO CONTENT -->
    <div class="content">
        <h1>Ian & Shan's <span>Literary House</span></h1>
        <p>Welcome back to Jamaica’s first hybrid bookstore-library-café! Discover books, enjoy our cozy café, borrow your favorites, or explore special sections for children, students, and creatives.</p>
    </div>

    <!-- Featured Sections... (keep your existing sections) -->
</div>

<footer>
    &copy; 2025 Ian & Shan's Literary House. All Rights Reserved.
</footer>

<!-- Firebase Modular SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
import { getAuth, onAuthStateChanged, browserLocalPersistence, setPersistence, signOut } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyDjSE5qV-U2MpRknwrma6KntqNZY8Iigpw",
    authDomain: "ianshanlh.firebaseapp.com",
    projectId: "ianshanlh",
    storageBucket: "ianshanlh.firebasestorage.app",
    messagingSenderId: "430636695542",
    appId: "1:430636695542:web:9a58b1a43750073b9851d7",
    measurementId: "G-ZFRTPB4G6E"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// Persist login across pages and reloads
setPersistence(auth, browserLocalPersistence);

// Check login state on page load
onAuthStateChanged(auth, (user) => {
    const navbar = document.getElementById("navbar-links");
    if (user) {
        console.log("User logged in:", user.email);
        // Add PROFILE link if not present
        if (!document.getElementById("profileNav")) {
            const li = document.createElement("li");
            li.id = "profileNav";
            li.innerHTML = `<a href="profile.html">PROFILE</a>`;
            navbar.insertBefore(li, navbar.children[4]); // adjust position as needed
        }
    } else {
        console.log("User NOT logged in");
        // Redirect to login page
        window.location.href = "login.html";
    }
});

// Optional: add logout button functionality if you have one
// document.getElementById("logoutBtn").addEventListener("click", () => signOut(auth).then(() => window.location.href="login.html"));
</script>

<!-- Search and theme toggle scripts (unchanged) -->
<script>
const searchForm = document.getElementById("searchForm");
searchForm.addEventListener("submit", function(event) {
    event.preventDefault();
    const query = document.getElementById("searchInput").value.trim().toLowerCase();
    if (!query) { alert("Please enter something to search."); return; }

    const pages = [
        {name: "Home", url: "homepage.html", keywords: ["home", "books", "literacy"]},
        {name: "About", url: "ABOUT.html", keywords: ["about", "story", "history"]},
        {name: "Services", url: "SERVICES.html", keywords: ["services", "cafe", "membership"]},
        {name: "Contact", url: "CONTACT.html", keywords: ["contact", "email", "phone"]}
    ];

    const result = pages.find(page => page.keywords.some(keyword => query.includes(keyword)));
    if (result) { window.location.href = result.url; }
    else { alert("No results found for: " + query); }
});

document.addEventListener("DOMContentLoaded", () => {
    const toggleButton = document.getElementById("theme-toggle");
    const themeIcon = document.getElementById("theme-icon");
    const body = document.body;

    if (localStorage.getItem("theme") === "light") {
        body.classList.add("light-mode");
        themeIcon.classList.replace("fa-moon", "fa-sun");
    }

    toggleButton.addEventListener("click", () => {
        body.classList.toggle("light-mode");
        if (body.classList.contains("light-mode")) {
            themeIcon.classList.replace("fa-moon", "fa-sun");
            localStorage.setItem("theme", "light");
        } else {
            themeIcon.classList.replace("fa-sun", "fa-moon");
            localStorage.setItem("theme", "dark");
        }
    });
});
</script>

</body>
</html>

